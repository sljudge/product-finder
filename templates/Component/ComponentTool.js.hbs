import { handleImages, handleText, saveImage, saveText } from "utils/tools";
import generateStyles from "./styles";

export default class {{pascalCase name}}Tool {
  static get toolbox() {
    return {
      title: "{{name}}",
      icon: '<i class="fas fa-image p-1 mx-2 border border-gray-500 bg-white"></i>',
    };
  }

  constructor({ data, config, api }) {
    this.data = {
    {{#each parts}}
        {{camelCase this}}: "",
    {{/each}}
    };
    this.styles = generateStyles();
    this.api = api;
    this.settings = [];
    this.wrapper = document.createElement("div");
  }

{{#each parts}}
    create{{pascalCase this}}(parent) {
        handleText(parent, this.data.{{camelCase this}}, this.styles["{{camelCase this}}"], "{{this}}");
    }
{{/each}}

  render() {
    this.wrapper.className += ` ${this.styles.container}`

    {{#each parts}}
    this.create{{pascalCase this}}(this.wrapper)
    {{/each}}

    return this.wrapper;
  }

   renderSettings() {
    const wrapper = document.createElement("div");
    this.settings.forEach((tune) => {
      let button = document.createElement("div");

      button.classList.add(this.api.styles.settingsButton);
      button.classList.toggle(
        this.api.styles.settingsButtonActive,
        this.data[tune.name]
      );
      button.innerHTML = tune.icon;
      wrapper.appendChild(button);

      button.addEventListener("click", () => {
        this._toggleTune(tune.name);
        button.classList.toggle(this.api.styles.settingsButtonActive);
      });
    });
    return wrapper;
  }

  _toggleTune(tune) {
    this.data[tune] = !this.data[tune];
    this._acceptTuneView();
  }

  _acceptTuneView() {
    this.settings.forEach((tune) => {});
  }
  
  save(blockContent) {
    {{#each parts}}
    const {{camelCase this}} = blockContent.querySelector("#{{this}}");
    {{/each}}

    return {
    {{#each parts}}
        {{camelCase this}}: saveText({{camelCase this}}),
    {{/each}}
    };
  }
}
